(this["webpackJsonpreact-admin_client"]=this["webpackJsonpreact-admin_client"]||[]).push([[0],{355:function(e,t,a){},427:function(e,t,a){},430:function(e,t,a){},432:function(e,t,a){},441:function(e,t,a){},468:function(e,t,a){},575:function(e,t,a){},576:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(41),s=a.n(c),i=a(54),o=a(19),l=a(20),u=a(22),d=a(21),j=a(79),h=a(45),p=(a(53),a(26)),b=(a(113),a(44)),m=(a(89),a(43)),O=a(585),f=a(586),x=a(24),g=a.n(x),v=a(33),y=(a(66),a(30)),w="set_head_title",k="receive_user",C="show_error_msg",S="reset_user",A=a(303),I=a.n(A).a.create({baseURL:"",timeout:5e5});function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET";return"GET"===a?I.get(e,{params:t}):I.post(e,t)}I.interceptors.response.use((function(e){var t=e.data;return 0!==t.status&&y.b.error(t.msg),t}),(function(e){return y.b.error("\u8bf7\u6c42\u51fa\u9519\u4e86\uff1a"+e.message),Promise.reject(e)}));var N=function(e){return R("/login",e,"POST")},T="user_key",M=function(e){return{type:w,data:e}},U=function(e){return{type:k,user:e}},P=function(e){return window.localStorage.removeItem(T),e&&y.b.success(e),{type:S}},D=(a(355),"data:image/png;base64,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"),L=a(4),F=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).initialValues={username:"admin",password:"admin"},e.handleFinish=function(t){return e.props.login(t)},e.validateUserName=[{required:!0,whitespace:!0,message:"\u7528\u6237\u540d\u5fc5\u987b\u8f93\u5165"},{min:4,message:"\u7528\u6237\u540d\u81f3\u5c114\u4f4d"},{max:12,message:"\u7528\u6237\u540d\u6700\u591a12\u4f4d"},{pattern:/^\w+$/,message:"\u7528\u6237\u540d\u5fc5\u987b\u662f\u82f1\u6587\u3001\u6570\u5b57\u6216\u4e0b\u5212\u7ebf\u7ec4\u6210"}],e.validatePassword=[{validator:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=function(e){return Promise.reject(e)};try{var r=t=t.trim(),n=r.length;return t?n<4?a("\u5bc6\u7801\u957f\u5ea6\u4e0d\u80fd\u5c0f\u4e8e4\u4f4d"):n>12?a("\u5bc6\u7801\u957f\u5ea6\u4e0d\u80fd\u5927\u4e8e12\u4f4d"):/^\w+$/.test(t)?Promise.resolve():a("\u5bc6\u7801\u5fc5\u987b\u662f\u82f1\u6587\u3001\u6570\u5b57\u6216\u4e0b\u5212\u7ebf\u7ec4\u6210"):a("\u5bc6\u7801\u5fc5\u987b\u8f93\u5165")}catch(c){return a("\u9a8c\u8bc1\u5931\u8d25")}}}],e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.user;if(e&&e._id)return Object(L.jsx)(h.a,{to:"/home"});var t=this.handleFinish,a=this.validateUserName,r=this.validatePassword,n=this.initialValues;return Object(L.jsxs)("div",{className:"login",children:[Object(L.jsxs)("header",{className:"login-header",children:[Object(L.jsx)("img",{src:D,alt:"logo"}),Object(L.jsx)("h1",{children:"React\u9879\u76ee: \u540e\u53f0\u7ba1\u7406\u7cfb\u7edf"})]}),Object(L.jsxs)("section",{className:"login-content",children:[Object(L.jsx)("div",{className:e.errorMsg?"error-msg show":"error-msg",children:e.errorMsg}),Object(L.jsx)("h2",{children:"\u7528\u6237\u767b\u5f55"}),Object(L.jsxs)(b.a,{className:"login-form",onFinish:t,initialValues:n,children:[Object(L.jsx)(b.a.Item,{name:"username",rules:a,children:Object(L.jsx)(m.a,{prefix:Object(L.jsx)(O.a,{className:"login-icon"}),placeholder:"\u7528\u6237\u540d",autoComplete:"off"})}),Object(L.jsx)(b.a.Item,{name:"password",rules:r,children:Object(L.jsx)(m.a,{prefix:Object(L.jsx)(f.a,{className:"login-icon"}),type:"password",placeholder:"\u5bc6\u7801"})}),Object(L.jsx)(b.a.Item,{children:Object(L.jsx)(p.a,{type:"primary",htmlType:"submit",block:!0,children:"\u767b\u5f55"})})]})]})]})}}]),a}(r.Component),K=Object(i.b)((function(e){return{user:e.user}}),{login:function(e){return function(){var t=Object(v.a)(g.a.mark((function t(a){var r,n,c,s;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N(e);case 2:if(r=t.sent,n=r.status,c=r.data,s=r.msg,0===n){t.next=8;break}return t.abrupt("return",a({type:C,errorMsg:s}));case 8:y.b.success("\u767b\u5f55\u6210\u529f"),i=c,window.localStorage.setItem(T,JSON.stringify(i)),a(U(c));case 11:case"end":return t.stop()}var i}),t)})));return function(e){return t.apply(this,arguments)}}()}})(F),H=(a(425),a(145)),Q=(a(427),a(428),a(82)),q=(a(430),a(587)),B=a(588),z=a(321),E=a(589),G=a(590),J=a(591),V=a(592),X=a(593),Y=a(594),Z=a(595),W=[{title:"\u9996\u9875",key:"/home",icon:Object(L.jsx)(q.a,{}),isPublic:!0},{title:"\u5546\u54c1",key:"/goods",icon:Object(L.jsx)(B.a,{}),children:[{title:"\u54c1\u7c7b\u7ba1\u7406",key:"/goods/category",icon:Object(L.jsx)(z.a,{})},{title:"\u5546\u54c1\u7ba1\u7406",key:"/goods/product",icon:Object(L.jsx)(E.a,{})}]},{title:"\u7528\u6237\u7ba1\u7406",key:"/user",icon:Object(L.jsx)(O.a,{})},{title:"\u89d2\u8272\u7ba1\u7406",key:"/role",icon:Object(L.jsx)(G.a,{})},{title:"\u56fe\u5f62\u56fe\u8868",key:"/charts",icon:Object(L.jsx)(J.a,{}),children:[{title:"\u67f1\u5f62\u56fe",key:"/charts/bar",icon:Object(L.jsx)(V.a,{})},{title:"\u6298\u7ebf\u56fe",key:"/charts/line",icon:Object(L.jsx)(X.a,{})},{title:"\u997c\u56fe",key:"/charts/pie",icon:Object(L.jsx)(Y.a,{})}]},{title:"\u8ba2\u5355\u7ba1\u7406",key:"/order",icon:Object(L.jsx)(Z.a,{})}],_=Q.a.SubMenu,$=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).hasAuth=function(e){var t=e.key,a=e.isPublic,n=r.props.user,c=n.role.menus;return!("admin"!==n.username&&!a&&!~c.indexOf(t))||!!e.children&&!!e.children.some((function(e){return~c.indexOf(e.key)}))},r.createMenuList=function(e){var t=r.props,a=t.location.pathname,n=t.setHeadTitle;return e.reduce((function(e,t){if(!r.hasAuth(t))return e;var c=t.title,s=t.key,i=t.icon,o=t.children;o?(o.some((function(e){return!a.indexOf(e.key)}))&&(r.defaultOpenKeys=[s]),e.push(Object(L.jsx)(_,{icon:i,title:c,children:r.createMenuList(o)},s))):(t.key!==a&&a.indexOf(t.key)||n(t.title),e.push(Object(L.jsx)(Q.a.Item,{icon:i,onClick:function(e){return n(t.title)},children:Object(L.jsx)(j.b,{to:s,children:c})},s)));return e}),[])},r.defaultOpenKeys=[],r.menuList=r.createMenuList(W),r}return Object(l.a)(a,[{key:"render",value:function(){var e=this.defaultOpenKeys,t=this.menuList,a=this.props.location.pathname;return a.indexOf("/goods/product")||(a="/goods/product"),Object(L.jsxs)("div",{className:"left-nav",children:[Object(L.jsxs)(j.b,{to:"/",className:"left-nav-header",children:[Object(L.jsx)("img",{src:D,alt:"logo"}),Object(L.jsx)("h1",{children:"\u8c37\u7c92\u540e\u53f0"})]}),Object(L.jsx)(Q.a,{mode:"inline",theme:"dark",selectedKeys:[a],defaultOpenKeys:e,children:t})]})}}]),a}(r.Component),ee=Object(i.b)((function(e){return{user:e.user}}),{setHeadTitle:M})(Object(h.g)($)),te=(a(100),a(55)),ae=a(596);a(432);function re(e){if(!e)return"";var t=(e=new Date(e)).getFullYear(),a=e.getMonth()+1,r=e.getDate(),n=e.getHours(),c=e.getMinutes(),s=e.getSeconds();return"".concat(t,"-").concat(ne(a),"-").concat(ne(r)," ").concat(ne(n),":").concat(ne(c),":").concat(ne(s))}function ne(e){return("00"+(e+="")).substr(e.length)}var ce=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).timer=0,e.state={currentTime:re(Date.now())},e.getTime=function(){e.timer=setInterval((function(){var t=re(Date.now());e.setState({currentTime:t})}),1e3)},e.logout=function(){te.a.confirm({title:"\u60a8\u786e\u5b9a\u9000\u51fa\u5417\uff1f",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onOk:function(){var t=Object(v.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.props.logout());case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getTime()}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"render",value:function(){var e=this.state.currentTime,t=this.props,a=t.headTitle,r=t.user;return Object(L.jsxs)("div",{className:"header",children:[Object(L.jsxs)("div",{className:"header-top",children:[Object(L.jsxs)("span",{children:["\u6b22\u8fce\uff0c",r.username]}),Object(L.jsx)(p.a,{type:"link",onClick:this.logout,children:"\u9000\u51fa"})]}),Object(L.jsxs)("div",{className:"header-bottom",children:[Object(L.jsx)("div",{className:"header-bottom-left",children:a}),Object(L.jsxs)("div",{className:"header-bottom-right",children:[Object(L.jsx)("span",{children:e}),Object(L.jsx)("a",{href:"https://github.com/w-l-l",target:"_blank",rel:"nofollow noopener noreferrer",children:Object(L.jsx)(ae.a,{className:"github"})}),Object(L.jsx)("span",{children:"\u591a\u4e91\u8f6c\u9634"})]})]})]})}}]),a}(r.Component),se=Object(i.b)((function(e){return{headTitle:e.headTitle,user:e.user}}),{logout:P})(Object(h.g)(ce)),ie=(a(433),a(146)),oe=(a(87),a(42)),le=(a(577),a(211)),ue=(a(578),a(315)),de=a(320),je=a(597),he=a(598),pe=a(599),be=a(83),me=a.n(be),Oe=a(64),fe=a(306),xe=a.n(fe),ge=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=(new xe.a).createView().source([{month:"Jan",a:7,b:3.9,c:5.9},{month:"Feb",a:6.9,b:4.2,c:1.9},{month:"Mar",a:9.5,b:5.7,c:3.9},{month:"Apr",a:14.5,b:8.5,c:5.5},{month:"May",a:18.4,b:11.9,c:8.9},{month:"Jun",a:21.5,b:15.2,c:10},{month:"Jul",a:25.2,b:17,c:12.9},{month:"Aug",a:26.5,b:16.6,c:15.9},{month:"Sep",a:23.3,b:14.2,c:20.7},{month:"Oct",a:18.3,b:10.3,c:25.9},{month:"Nov",a:13.9,b:6.6,c:30.9},{month:"Dec",a:9.6,b:4.8,c:35.9}]);e.transform({type:"fold",fields:["a","b","c"],key:"city",value:"temperature"});return Object(L.jsx)("div",{style:{float:"right",width:750,height:300},children:Object(L.jsxs)(Oe.Chart,{height:250,data:e,scale:{month:{range:[0,1]}},forceFit:!0,children:[Object(L.jsx)(Oe.Legend,{}),Object(L.jsx)(Oe.Axis,{name:"month"}),Object(L.jsx)(Oe.Axis,{name:"temperature",label:{formatter:function(e){return"".concat(e,"\u4e07\u4e2a")}}}),Object(L.jsx)(Oe.Tooltip,{crosshairs:{type:"y"}}),Object(L.jsx)(Oe.Geom,{type:"line",position:"month*temperature",size:2,color:"city",shape:"smooth"}),Object(L.jsx)(Oe.Geom,{type:"point",position:"month*temperature",size:4,shape:"circle",color:"city",style:{stroke:"#fff",lineWidth:1}})]})})}}]),a}(r.Component),ve=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(L.jsx)("div",{style:{width:"100%",marginLeft:-30},children:Object(L.jsxs)(Oe.Chart,{height:338,data:[{year:"1\u6708",sales:38},{year:"2\u6708",sales:52},{year:"3\u6708",sales:61},{year:"4\u6708",sales:145},{year:"5\u6708",sales:48},{year:"6\u6708",sales:38},{year:"7\u6708",sales:28},{year:"8\u6708",sales:38},{year:"59\u6708",sales:68},{year:"10\u6708",sales:38},{year:"11\u6708",sales:58},{year:"12\u6708",sales:38}],scale:{sales:{tickInterval:20}},forceFit:!0,children:[Object(L.jsx)(Oe.Axis,{name:"year"}),Object(L.jsx)(Oe.Axis,{name:"sales"}),Object(L.jsx)(Oe.Tooltip,{crosshairs:{type:"y"}}),Object(L.jsx)(Oe.Geom,{type:"interval",position:"year*sales"})]})})}}]),a}(r.Component),ye=(a(441),"YYYY/MM/DD"),we=ue.a.RangePicker,ke=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={isVisited:!0},e.handleChange=function(t){return function(a){return e.setState({isVisited:t})}},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state.isVisited;return Object(L.jsxs)("div",{className:"home",children:[Object(L.jsxs)(oe.a,{className:"home-card",title:"\u5546\u54c1\u603b\u91cf",extra:Object(L.jsx)(de.a,{style:{color:"rgba(0,0,0,.45)"}}),style:{width:250},headStyle:{color:"rgba(0,0,0,.45)"},children:[Object(L.jsx)(le.a,{value:1128163,suffix:"\u4e2a",style:{fontWeight:"bolder"}}),Object(L.jsx)(le.a,{value:15,valueStyle:{fontSize:15},prefix:"\u5468\u540c\u6bd4",suffix:Object(L.jsxs)("div",{children:["%",Object(L.jsx)(je.a,{style:{color:"red",marginLeft:10}})]})}),Object(L.jsx)(le.a,{value:10,valueStyle:{fontSize:15},prefix:"\u65e5\u540c\u6bd4",suffix:Object(L.jsxs)("div",{children:["%",Object(L.jsx)(he.a,{style:{color:"#3f8600",marginLeft:10}})]})})]}),Object(L.jsx)(ge,{}),Object(L.jsxs)(oe.a,{className:"home-content",title:Object(L.jsxs)("div",{className:"home-menu",children:[Object(L.jsx)("span",{className:e?"home-menu-active home-menu-visited":"home-menu-visited",onClick:this.handleChange(!0),children:"\u8bbf\u95ee\u91cf"}),Object(L.jsx)("span",{className:e?"":"home-menu-active",onClick:this.handleChange(!1),children:"\u9500\u552e\u91cf"})]}),extra:Object(L.jsx)(we,{defaultValue:[me()("2019/01/01",ye),me()("2019/06/01",ye)],format:ye}),children:[Object(L.jsx)(oe.a,{className:"home-table-left",title:e?"\u8bbf\u95ee\u8d8b\u52bf":"\u9500\u552e\u8d8b\u52bf",bodyStyle:{padding:0,height:275},extra:Object(L.jsx)(pe.a,{}),children:Object(L.jsx)(ve,{})}),Object(L.jsx)(oe.a,{title:"\u4efb\u52a1",extra:Object(L.jsx)(pe.a,{}),className:"home-table-right",children:Object(L.jsxs)(ie.a,{children:[Object(L.jsx)(ie.a.Item,{color:"green",children:"\u65b0\u7248\u672c\u8fed\u4ee3\u4f1a"}),Object(L.jsx)(ie.a.Item,{color:"green",children:"\u5b8c\u6210\u7f51\u7ad9\u8bbe\u8ba1\u521d\u7248"}),Object(L.jsxs)(ie.a.Item,{color:"red",children:[Object(L.jsx)("p",{children:"\u8054\u8c03\u63a5\u53e3"}),Object(L.jsx)("p",{children:"\u529f\u80fd\u9a8c\u6536"})]}),Object(L.jsxs)(ie.a.Item,{children:[Object(L.jsx)("p",{children:"\u767b\u5f55\u529f\u80fd\u8bbe\u8ba1"}),Object(L.jsx)("p",{children:"\u6743\u9650\u9a8c\u8bc1"}),Object(L.jsx)("p",{children:"\u9875\u9762\u6392\u7248"})]})]})})]})]})}}]),a}(r.Component),Ce=a(119),Se=(a(181),a(76)),Ae=a(322),Ie=a(600),Re=function(e){return R("/manage/category/list",e)},Ne=function(e){return R("/manage/category/add",e,"POST")},Te=function(e){return R("/manage/category/update",e,"POST")},Me=function(e){return R("/manage/product/list",e)},Ue=function(e){return R("/manage/product/search",e)},Pe=function(e){return R("/manage/product/updateStatus",e,"POST")},De=function(e){return R("/manage/category/info",e)},Le=function(e){return R("/manage/product/add",e,"POST")},Fe=function(e){return R("/manage/product/update",e,"POST")},Ke="http://localhost:5000/upload/",He=(a(170),a(63)),Qe=He.a.Option,qe=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).formRef=n.a.createRef(),e.setSelectOption=function(){return e.props.categorys.map((function(e){var t=e._id,a=e.name;return Object(L.jsx)(Qe,{value:t,children:a},t)}))},e.validateParentId=[{required:!0,message:"\u8bf7\u9009\u62e9\u6240\u5c5e\u5206\u7c7b"}],e.validateCategoryName=[{required:!0,whitespace:!0,message:"\u5206\u7c7b\u540d\u79f0\u5fc5\u987b\u8f93\u5165"}],e.cancelModal=function(){e.formRef.current.resetFields(),e.props.cancelModal()},e.addCategory=Object(v.a)(g.a.mark((function t(){var a,r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.formRef.current.validateFields();case 3:return a=t.sent,t.next=6,Ne(a);case 6:if(r=t.sent,0===r.status){t.next=10;break}return t.abrupt("return");case 10:y.b.success("\u6dfb\u52a0\u5206\u7c7b\u6210\u529f"),e.cancelModal(),e.props.getCategory(a.parentId),t.next=17;break;case 15:t.prev=15,t.t0=t.catch(0);case 17:case"end":return t.stop()}}),t,null,[[0,15]])}))),e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.formRef,t=this.setSelectOption,a=this.validateParentId,r=this.validateCategoryName,n=this.addCategory,c=this.cancelModal,s=this.props,i=s.visible,o={parentId:s.parentId,categoryName:""};return Object(L.jsx)(te.a,{title:"\u6dfb\u52a0\u5206\u7c7b",visible:i,onCancel:c,onOk:n,destroyOnClose:!0,okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",children:Object(L.jsxs)(b.a,{layout:"vertical",initialValues:o,ref:e,children:[Object(L.jsx)(b.a.Item,{name:"parentId",label:"\u6240\u5c5e\u5206\u7c7b\uff1a",rules:a,children:Object(L.jsxs)(He.a,{placeholder:"\u8bf7\u9009\u62e9\u6240\u5c5e\u5206\u7c7b",allowClear:!0,showSearch:!0,optionFilterProp:"children",children:[Object(L.jsx)(Qe,{value:"0",children:"\u4e00\u7ea7\u5206\u7c7b"}),t()]})}),Object(L.jsx)(b.a.Item,{name:"categoryName",label:"\u5206\u7c7b\u540d\u79f0\uff1a",rules:r,children:Object(L.jsx)(m.a,{placeholder:"\u8bf7\u8f93\u5165\u5206\u7c7b\u540d\u79f0",autoComplete:"off"})})]})})}}]),a}(r.Component),Be=a(110),ze=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).formRef=n.a.createRef(),e.validateCategoryName=[{required:!0,whitespace:!0,message:"\u5206\u7c7b\u540d\u79f0\u5fc5\u987b\u8f93\u5165"}],e.cancelModal=function(){e.formRef.current.resetFields(),e.props.cancelModal()},e.updateCategory=Object(v.a)(g.a.mark((function t(){var a,r,n,c,s,i;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.formRef.current.validateFields();case 3:return a=t.sent,r=e.props,n=r.category,c=r.getCategory,s=n._id,t.next=8,Te(Object(Be.a)(Object(Be.a)({},a),{},{categoryId:s}));case 8:if(i=t.sent,0===i.status){t.next=12;break}return t.abrupt("return");case 12:y.b.success("\u4fee\u6539\u5206\u7c7b\u6210\u529f"),e.cancelModal(),c(),t.next=19;break;case 17:t.prev=17,t.t0=t.catch(0);case 19:case"end":return t.stop()}}),t,null,[[0,17]])}))),e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.cancelModal,t=this.updateCategory,a=this.formRef,r=this.validateCategoryName,n=this.props,c=n.category,s=n.visible,i={categoryName:c.name};return Object(L.jsx)(te.a,{title:"\u4fee\u6539\u5206\u7c7b",visible:s,onCancel:e,onOk:t,destroyOnClose:!0,okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",children:Object(L.jsx)(b.a,{layout:"vertical",initialValues:i,ref:a,children:Object(L.jsx)(b.a.Item,{name:"categoryName",label:"\u5206\u7c7b\u540d\u79f0\uff1a",rules:r,children:Object(L.jsx)(m.a,{placeholder:"\u8bf7\u8f93\u5165\u5206\u7c7b\u540d\u79f0",autoComplete:"off"})})})})}}]),a}(r.Component),Ee=Se.a.Column,Ge=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).category={},e.state={categorys:[],subCategorys:[],showStatus:0,parentId:"0",parentName:"",loading:!1},e.getCategory=function(){var t=Object(v.a)(g.a.mark((function t(a){var r,n,c,s,i,o;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n=e.state.parentId,!a||a===n){t.next=4;break}return t.abrupt("return");case 4:return e.setState({loading:!0}),t.next=7,Re({parentId:n});case 7:if(c=t.sent,s=c.status,i=c.data,0===s){t.next=12;break}return t.abrupt("return");case 12:o="0"===n?"categorys":"subCategorys",e.setState((r={},Object(Ce.a)(r,o,i),Object(Ce.a)(r,"loading",!1),r)),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),y.b.error("\u5206\u7c7b\u5217\u8868\u83b7\u53d6\u5931\u8d25");case 19:case"end":return t.stop()}}),t,null,[[0,16]])})));return function(e){return t.apply(this,arguments)}}(),e.getSubCategory=function(t){var a=t._id,r=t.name;e.setState({parentId:a,parentName:r},e.getCategory)},e.showCategorys=function(){e.setState({parentId:"0",parentName:"",subCategorys:[]},e.getCategory)},e.showModal=function(t){e.setState({showStatus:t})},e.showUpdateModal=function(t){e.category=t,e.showModal(2)},e.cancelModal=function(){return e.showModal(0)},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getCategory()}},{key:"render",value:function(){var e=this,t=this.showModal,a=this.cancelModal,r=this.getCategory,n=this.category,c=this.showCategorys,s=this.state,i=s.categorys,o=s.subCategorys,l=s.showStatus,u=s.parentId,d=s.parentName,j=s.loading,h="0"===u,b=Object(L.jsx)(p.a,{type:"primary",icon:Object(L.jsx)(Ae.a,{}),onClick:function(){return t(1)},children:"\u6dfb\u52a0\u5206\u7c7b"}),m=h?"\u4e00\u7ea7\u5206\u7c7b\u5217\u8868":Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(p.a,{type:"link",onClick:c,style:{padding:0,fontSize:16},children:"\u4e00\u7ea7\u5206\u7c7b\u5217\u8868"}),Object(L.jsx)(Ie.a,{style:{margin:"0 5px"}}),Object(L.jsx)("span",{children:d})]});return Object(L.jsxs)(oe.a,{title:m,extra:b,children:[Object(L.jsxs)(Se.a,{dataSource:h?i:o,rowKey:"_id",bordered:!0,loading:j,pagination:{defaultPageSize:3,showQuickJumper:!0},children:[Object(L.jsx)(Ee,{title:"\u5206\u7c7b\u540d\u79f0",dataIndex:"name"}),Object(L.jsx)(Ee,{title:"\u64cd\u4f5c",render:function(t){return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(p.a,{type:"link",onClick:function(){return e.showUpdateModal(t)},children:"\u4fee\u6539\u5206\u7c7b"}),h?Object(L.jsx)(p.a,{type:"link",onClick:function(){return e.getSubCategory(t)},children:"\u67e5\u770b\u5b50\u5206\u7c7b"}):null]})},width:"300px"})]}),Object(L.jsx)(qe,{visible:1===l,cancelModal:a,categorys:i,parentId:u,getCategory:r}),Object(L.jsx)(ze,{visible:2===l,cancelModal:a,category:n,getCategory:r})]})}}]),a}(r.Component),Je=(a(464),a(323)),Ve=He.a.Option,Xe=Se.a.Column,Ye=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).currentPage=1,e.state={total:0,productList:[],loading:!1,searchType:"productName",searchName:""},e.getProductList=Object(v.a)(g.a.mark((function t(){var a,r,n,c,s,i,o,l,u,d,j=arguments;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=j.length>0&&void 0!==j[0]?j[0]:1,t.prev=1,e.setState({loading:!0}),e.currentPage=a,r=e.state,n=r.searchType,c=r.searchName,s={pageNum:a,pageSize:3},c&&(s[n]=c),t.next=9,c?Ue(s):Me(s);case 9:if(i=t.sent,o=i.status,l=i.data,0===o){t.next=14;break}return t.abrupt("return");case 14:u=l.list,d=l.total,e.setState({productList:u,total:d,loading:!1}),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(1),y.b.error("\u5546\u54c1\u5217\u8868\u83b7\u53d6\u5931\u8d25");case 21:case"end":return t.stop()}}),t,null,[[1,18]])}))),e.setProductStatus=function(){var t=Object(v.a)(g.a.mark((function t(a,r){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=1===r?2:1,t.next=3,Pe({productId:a,status:r});case 3:if(n=t.sent,0===n.status){t.next=7;break}return t.abrupt("return");case 7:y.b.success("\u5546\u54c1\u72b6\u6001\u66f4\u65b0\u6210\u529f"),e.getProductList(e.currentPage);case 9:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.tableStatusRender=function(t){var a=t._id,r=t.status;return Object(L.jsx)(Je.a,{checkedChildren:"\u4e0a\u67b6",unCheckedChildren:"\u4e0b\u67b6",checked:1===r,onChange:function(){return e.setProductStatus(a,r)}})},e.tableHandleRender=function(t){var a=e.props.history.push;return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(p.a,{type:"link",onClick:function(){return a("/goods/product/detail",{product:t})},children:"\u8be6\u60c5"}),Object(L.jsx)(p.a,{type:"link",onClick:function(){return a("/goods/product/update",t)},children:"\u4fee\u6539"})]})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getProductList()}},{key:"render",value:function(){var e=this,t=this.currentPage,a=this.getProductList,r=this.tableStatusRender,n=this.tableHandleRender,c=this.state,s=c.total,i=c.productList,o=c.loading,l=c.searchType,u=Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)(He.a,{placeholder:"\u8bf7\u9009\u62e9\u641c\u7d22\u7c7b\u578b",style:{width:150},value:l,onChange:function(t){return e.setState({searchType:t})},children:[Object(L.jsx)(Ve,{value:"productName",children:"\u6309\u540d\u79f0\u641c\u7d22"}),Object(L.jsx)(Ve,{value:"productDesc",children:"\u6309\u63cf\u8ff0\u641c\u7d22"})]}),Object(L.jsx)(m.a,{placeholder:"\u5173\u952e\u5b57",autoComplete:"off",style:{width:150,margin:"0 15px"},onChange:function(t){return e.setState({searchName:t.target.value})}}),Object(L.jsx)(p.a,{type:"primary",onClick:function(){return a()},children:"\u641c\u7d22"})]}),d=Object(L.jsx)(p.a,{type:"primary",icon:Object(L.jsx)(Ae.a,{}),onClick:function(){return e.props.history.push("/goods/product/add")},children:"\u6dfb\u52a0\u5546\u54c1"}),j={current:t,defaultPageSize:3,total:s,showQuickJumper:!0,onChange:a};return Object(L.jsx)(oe.a,{title:u,extra:d,children:Object(L.jsxs)(Se.a,{dataSource:i,pagination:j,loading:o,bordered:!0,rowKey:"_id",children:[Object(L.jsx)(Xe,{title:"\u5546\u54c1\u540d\u79f0",dataIndex:"name"}),Object(L.jsx)(Xe,{title:"\u5546\u54c1\u63cf\u8ff0",dataIndex:"desc"}),Object(L.jsx)(Xe,{title:"\u4ef7\u683c",dataIndex:"price",render:function(e){return"\uffe5".concat(e)},width:"100px"}),Object(L.jsx)(Xe,{title:"\u72b6\u6001",render:r,width:"100px"}),Object(L.jsx)(Xe,{title:"\u64cd\u4f5c",render:n,width:"160px"})]})})}}]),a}(r.Component),Ze=a(158),We=(a(466),a(232)),_e=a(601),$e=(a(468),We.b.Item),et=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={parentCategoryName:"",childCategoryName:""},e.getCategoryName=Object(v.a)(g.a.mark((function t(){var a,r,n,c,s,i,o,l,u,d,j,h,p,b;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props.location.state.product,r=a.pCategoryId,n=a.categoryId,"0"!==r){t.next=11;break}return t.next=4,De({categoryId:n});case 4:c=t.sent,s=c.data,i=(s=void 0===s?{}:s).name,e.setState({parentCategoryName:i}),t.next=24;break;case 11:return t.next=13,Promise.all([De({categoryId:r}),De({categoryId:n})]);case 13:o=t.sent,l=Object(Ze.a)(o,2),u=l[0],d=l[1],j=u.data,h=(j=void 0===j?{}:j).name,p=d.data,b=(p=void 0===p?{}:p).name,e.setState({parentCategoryName:h,childCategoryName:b});case 24:case"end":return t.stop()}}),t)}))),e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getCategoryName()}},{key:"render",value:function(){var e=this.props.location.state.product,t=e.name,a=e.desc,r=e.price,n=e.detail,c=e.imgs,s=void 0===c?[]:c,i=this.state,o=i.parentCategoryName,l=i.childCategoryName,u=Object(L.jsxs)("span",{children:[Object(L.jsx)(_e.a,{style:{marginRight:10,cursor:"pointer",color:"#1DA57A"},onClick:this.props.history.goBack}),Object(L.jsx)("span",{children:"\u5546\u54c1\u8be6\u60c5"})]});return Object(L.jsx)(oe.a,{title:u,className:"product-detail",children:Object(L.jsxs)(We.b,{children:[Object(L.jsxs)($e,{children:[Object(L.jsx)("span",{className:"label",children:"\u5546\u54c1\u540d\u79f0\uff1a"}),Object(L.jsx)("span",{children:t})]}),Object(L.jsxs)($e,{children:[Object(L.jsx)("span",{className:"label",children:"\u5546\u54c1\u63cf\u8ff0\uff1a"}),Object(L.jsx)("span",{children:a})]}),Object(L.jsxs)($e,{children:[Object(L.jsx)("span",{className:"label",children:"\u5546\u54c1\u4ef7\u683c\uff1a"}),Object(L.jsxs)("span",{children:[r,"\u5143"]})]}),Object(L.jsxs)($e,{children:[Object(L.jsx)("span",{className:"label",children:"\u6240\u5c5e\u5206\u7c7b\uff1a"}),Object(L.jsx)("span",{children:o+(l?" --\x3e ".concat(l):"")})]}),Object(L.jsxs)($e,{children:[Object(L.jsx)("span",{className:"label",children:"\u5546\u54c1\u56fe\u7247\uff1a"}),Object(L.jsx)("span",{children:s.map((function(e){return Object(L.jsx)("img",{className:"product-img",src:Ke+e,alt:"img"},e)}))})]}),Object(L.jsxs)($e,{children:[Object(L.jsx)("span",{className:"label",children:"\u5546\u54c1\u8be6\u60c5\uff1a"}),Object(L.jsx)("span",{dangerouslySetInnerHTML:{__html:n}})]})]})})}}]),a}(r.Component),tt=(a(469),a(318)),at=a(319),rt=a(108),nt=(a(579),a(316)),ct=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var r;Object(o.a)(this,a),(r=t.call(this,e)).state={previewVisible:!1,previewImage:"",previewTitle:"",fileList:[]},r.getImgs=function(e){return r.state.fileList.map((function(e){return e.name}))},r.handlePreview=function(e){var t=e.url,a=e.thumbUrl,n=e.name;return r.setState({previewVisible:!0,previewImage:t||a,previewTitle:n})},r.handleCancel=function(e){return r.setState({previewVisible:!1,previewImage:"",previewTitle:""})},r.handleChange=function(){var e=Object(v.a)(g.a.mark((function e(t){var a,n,c,s,i,o,l,u,d;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.file,n=t.fileList,c=a.status,s=a.response,i=a.name,"done"!==c){e.next=6;break}0===s.status?(o=s.data,l=o.name,u=o.url,a.name=l,a.url=u,y.b.success("\u56fe\u7247\u4e0a\u4f20\u6210\u529f")):y.b.error("\u56fe\u7247\u4e0a\u4f20\u5931\u8d25"),e.next=12;break;case 6:if("removed"!==c){e.next=12;break}return e.next=9,R("/manage/img/delete",{name:i},"POST");case 9:d=e.sent,0===d.status?y.b.success("\u5220\u9664\u56fe\u7247\u6210\u529f"):y.b.error("\u5220\u9664\u56fe\u7247\u5931\u8d25");case 12:r.setState({fileList:n});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var n=[],c=r.props.imgs;return c&&c.length>0&&(n=c.map((function(e,t){return{uid:-t,name:e,status:"done",url:Ke+e}}))),r.state={previewVisible:!1,previewImage:"",previewTitle:"",fileList:n},r}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state,t=e.previewVisible,a=e.previewImage,r=e.previewTitle,n=e.fileList,c=this.handlePreview,s=this.handleChange,i=this.handleCancel,o=Object(L.jsxs)("div",{children:[Object(L.jsx)(Ae.a,{}),Object(L.jsx)("div",{style:{marginTop:4},children:"Upload"})]});return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(nt.a,{action:"/api/manage/img/upload",accept:"image/*",name:"image",listType:"picture-card",fileList:n,onPreview:c,onChange:s,children:n.length>=4?null:o}),Object(L.jsx)(te.a,{visible:t,title:r,footer:null,onCancel:i,children:Object(L.jsx)("img",{alt:"example",style:{width:"100%"},src:a})})]})}}]),a}(r.Component),st=a(201),it=a(309),ot=a(120),lt=a(310),ut=a.n(lt),dt=a(311),jt=a.n(dt),ht=(a(567),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var r;Object(o.a)(this,a),(r=t.call(this,e)).state={editorState:ot.EditorState.createEmpty()},r.onEditorStateChange=function(e){r.setState({editorState:e}),r.getDetail()},r.getDetail=function(e){return ut()(Object(ot.convertToRaw)(r.state.editorState.getCurrentContent()))},r.uploadCallback=function(e){return new Promise((function(t,a){var r=new XMLHttpRequest;r.open("POST","/api/manage/img/upload");var n=new FormData;n.append("image",e),r.send(n),r.addEventListener("load",(function(e){var a=JSON.parse(r.responseText).data.url;t({data:{link:a}})})),r.addEventListener("error",(function(e){var t=JSON.parse(r.responseText);a(t)}))}))};var n=r.props.detail;if(!n)return Object(st.a)(r);var c=jt()(n),s=ot.ContentState.createFromBlockArray(c.contentBlocks),i=ot.EditorState.createWithContent(s);return r.state={editorState:i},r}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state.editorState,t=this.onEditorStateChange,a=this.uploadCallback;return Object(L.jsx)("div",{children:Object(L.jsx)(it.Editor,{editorState:e,editorStyle:{border:"1px solid",minHeight:200,paddingLeft:10},onEditorStateChange:t,toolbar:{image:{uploadCallback:a},alt:{present:!0,mandatory:!0}}})})}}]),a}(r.Component)),pt=b.a.Item,bt=m.a.TextArea,mt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;Object(o.a)(this,a),(n=t.call(this,e)).isUpdate=!0,n.product={},n.imgRef=null,n.editorRef=null,n.state={options:[]},n.getCategorys=function(){var e=Object(v.a)(g.a.mark((function e(t){var a,r,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Re({parentId:t});case 2:if(a=e.sent,r=a.status,c=a.data,0===r){e.next=7;break}return e.abrupt("return");case 7:if("0"!==t){e.next=11;break}n.initOptions(c),e.next=12;break;case 11:return e.abrupt("return",c);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.setCategorys=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.map((function(e){return{value:e._id,label:e.name,isLeaf:t}}))},n.initOptions=function(){var e=Object(v.a)(g.a.mark((function e(t){var a,r,c,s,i,o,l,u;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Object(rt.a)(n),r=a.isUpdate,c=a.product.pCategoryId,s=a.getCategorys,i=a.setCategorys,o=i(t),!r||"0"===c){e.next=9;break}return e.next=5,s(c);case 5:l=e.sent,u=i(l),o.find((function(e){return e.value===c})).children=u;case 9:n.setState({options:o});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.validatorPrice=function(e,t){return 1*t>0?Promise.resolve():Promise.reject("\u5546\u54c1\u4ef7\u683c\u5fc5\u987b\u5927\u4e8e0")},n.loadData=function(){var e=Object(v.a)(g.a.mark((function e(t){var a,r,c,s,i,o,l;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(Ze.a)(t,1),(r=a[0]).loading=!0,c=Object(rt.a)(n),s=c.getCategorys,i=c.setCategorys,e.next=5,s(r.value);case 5:o=e.sent,r.loading=!1,o&&o.length>0?r.children=i(o,!0):r.isLeaf=!0,l=n.state.options,n.setState({options:l});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.submit=function(){var e=Object(v.a)(g.a.mark((function e(t){var a,r,c,s,i,o,l,u,d,j,h,p,b,m,O,f,x,v;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,r=t.desc,c=t.price,s=t.categoryIds,1===(i=Object(at.a)(s)).length&&i.unshift("0"),o=Object(Ze.a)(i,2),l=o[0],u=o[1],d=Object(rt.a)(n),j=d.imgRef,h=d.editorRef,p=d.isUpdate,b=j.current.getImgs(),m=h.current.getDetail(),O={name:a,desc:r,price:c,pCategoryId:l,categoryId:u,imgs:b,detail:m},f="\u6dfb\u52a0\u5546\u54c1",x=Le,p&&(O._id=n.product._id,f="\u66f4\u65b0\u5546\u54c1",x=Fe),e.next=12,x(O);case 12:if(v=e.sent,0===v.status){e.next=16;break}return e.abrupt("return",y.b.success("".concat(f,"\u5931\u8d25\uff01")));case 16:y.b.success("".concat(f,"\u6210\u529f\uff01")),n.props.history.goBack();case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var c=n.props.location.state;return n.isUpdate=!!c,n.product=c||{},n.imgRef=Object(r.createRef)(),n.editorRef=Object(r.createRef)(),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getCategorys("0")}},{key:"render",value:function(){var e=this.isUpdate,t=this.submit,a=this.validatorPrice,r=this.loadData,n=this.imgRef,c=this.editorRef,s=this.product,i=this.state.options,o=s.name,l=s.desc,u=s.price,d=s.pCategoryId,j=s.categoryId,h=s.imgs,O=s.detail,f={};if(e){var x=[j];"0"!==d&&x.unshift(d),f={name:o,desc:l,price:u+"",categoryIds:x}}var g=Object(L.jsxs)("span",{children:[Object(L.jsx)(_e.a,{style:{marginRight:10,cursor:"pointer",color:"#1DA57A"},onClick:this.props.history.goBack}),Object(L.jsxs)("span",{children:[e?"\u4fee\u6539":"\u6dfb\u52a0","\u5546\u54c1"]})]});return Object(L.jsx)(oe.a,{title:g,children:Object(L.jsxs)(b.a,{labelCol:{span:2},wrapperCol:{span:8},onFinish:t,initialValues:f,children:[Object(L.jsx)(pt,{label:"\u5546\u54c1\u540d\u79f0",name:"name",rules:[{required:!0,message:"\u5fc5\u987b\u8f93\u5165\u5546\u54c1\u540d\u79f0",whitespace:!0}],children:Object(L.jsx)(m.a,{placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u540d\u79f0",autoComplete:"off"})}),Object(L.jsx)(pt,{label:"\u5546\u54c1\u63cf\u8ff0",name:"desc",rules:[{required:!0,message:"\u5fc5\u987b\u8f93\u5165\u5546\u54c1\u63cf\u8ff0",whitespace:!0}],children:Object(L.jsx)(bt,{placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u63cf\u8ff0",autoSize:{minRows:2,maxRows:6}})}),Object(L.jsx)(pt,{label:"\u5546\u54c1\u4ef7\u683c",name:"price",rules:[{required:!0,message:"\u5fc5\u987b\u8f93\u5165\u5546\u54c1\u4ef7\u683c",whitespace:!0},{validator:a}],children:Object(L.jsx)(m.a,{placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u4ef7\u683c",addonAfter:"\u5143",autoComplete:"off"})}),Object(L.jsx)(pt,{label:"\u5546\u54c1\u5206\u7c7b",name:"categoryIds",rules:[{required:!0,message:"\u5fc5\u987b\u6307\u5b9a\u5546\u54c1\u5206\u7c7b"}],children:Object(L.jsx)(tt.a,{options:i,loadData:r,placeholder:"\u8bf7\u6307\u5b9a\u5546\u54c1\u5206\u7c7b"})}),Object(L.jsx)(pt,{label:"\u5546\u54c1\u56fe\u7247",children:Object(L.jsx)(ct,{ref:n,imgs:h})}),Object(L.jsx)(pt,{label:"\u5546\u54c1\u8be6\u60c5",wrapperCol:{span:20},children:Object(L.jsx)(ht,{ref:c,detail:O})}),Object(L.jsx)(pt,{children:Object(L.jsx)(p.a,{type:"primary",htmlType:"submit",children:"\u63d0\u4ea4"})})]})})}}]),a}(r.Component),Ot=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(L.jsxs)(h.d,{children:[Object(L.jsx)(h.b,{path:"/goods/product",exact:!0,component:Ye}),Object(L.jsx)(h.b,{path:"/goods/product/detail",component:et}),Object(L.jsx)(h.b,{path:"/goods/product/add",component:mt}),Object(L.jsx)(h.b,{path:"/goods/product/update",component:mt}),Object(L.jsx)(h.a,{to:"/goods/product"})]})}}]),a}(r.Component),ft=function(e){return R("/manage/user/list")},xt=function(e){return R("/manage/user/delete",e,"POST")},gt=function(e){return R("/manage/user/add",e,"POST")},vt=function(e){return R("/manage/user/update",e,"POST")},yt=b.a.Item,wt=He.a.Option,kt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).formRef=Object(r.createRef)(),e.user={},e.state={isModalVisible:!1},e.show=function(t){e.user=t||{},e.setState({isModalVisible:!0})},e.handleOk=function(){var t=Object(v.a)(g.a.mark((function t(a){var r,n,c,s,i,o,l,u;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.formRef.current.validateFields();case 2:return r=t.sent,n=Object(rt.a)(e),c=n.user,s=n.handleCancel,c._id&&(r._id=c._id),t.next=7,c._id?vt(r):gt(r);case 7:if(i=t.sent,0===i.status){t.next=11;break}return t.abrupt("return");case 11:if(o=e.props.user,l=o._id,u=o.role_id,!c._id||c._id!==l||r.role_id===u){t.next=14;break}return t.abrupt("return",e.props.logout("\u5f53\u524d\u7528\u6237\u89d2\u8272\u53d1\u751f\u53d8\u66f4\uff0c\u8bf7\u91cd\u65b0\u767b\u9646"));case 14:y.b.success("".concat(c._id?"\u4fee\u6539":"\u6dfb\u52a0","\u7528\u6237\u6210\u529f")),e.props.getUserList(),s();case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleCancel=function(t){e.formRef.current.resetFields(),e.setState({isModalVisible:!1})},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.handleOk,t=this.handleCancel,a=this.formRef,r=this.user,n=this.state.isModalVisible,c=this.props.roles;return Object(L.jsx)(te.a,{title:"".concat(r._id?"\u4fee\u6539":"\u6dfb\u52a0","\u7528\u6237"),visible:n,destroyOnClose:!0,onOk:e,onCancel:t,children:Object(L.jsxs)(b.a,{preserve:!1,ref:a,labelCol:{span:4},wrapperCol:{span:15},initialValues:r,children:[Object(L.jsx)(yt,{label:"\u7528\u6237\u540d",name:"username",rules:[{required:!0,message:"\u7528\u6237\u540d\u5fc5\u987b\u8f93\u5165"}],children:Object(L.jsx)(m.a,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d",autoComplete:"off"})}),r._id?null:Object(L.jsx)(yt,{label:"\u5bc6\u7801",name:"password",rules:[{required:!0,message:"\u5bc6\u7801\u5fc5\u987b\u8f93\u5165"}],children:Object(L.jsx)(m.a,{type:"password",placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",autoComplete:"off"})}),Object(L.jsx)(yt,{label:"\u624b\u673a\u53f7",name:"phone",rules:[{required:!0,message:"\u624b\u673a\u53f7\u5fc5\u987b\u8f93\u5165"}],children:Object(L.jsx)(m.a,{placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7",autoComplete:"off"})}),Object(L.jsx)(yt,{label:"\u90ae\u7bb1",name:"email",rules:[{required:!0,message:"\u90ae\u7bb1\u5fc5\u987b\u8f93\u5165"}],children:Object(L.jsx)(m.a,{placeholder:"\u8bf7\u8f93\u5165\u90ae\u7bb1",autoComplete:"off"})}),Object(L.jsx)(yt,{label:"\u89d2\u8272",name:"role_id",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u89d2\u8272"}],children:Object(L.jsx)(He.a,{placeholder:"\u8bf7\u9009\u62e9\u89d2\u8272",allowClear:!0,showSearch:!0,optionFilterProp:"children",children:c.map((function(e){return Object(L.jsx)(wt,{value:e._id,children:e.name},e._id)}))})})]})})}}]),a}(r.Component),Ct=Object(i.b)((function(e){return{user:e.user}}),{logout:P})(Object(h.g)(kt)),St=Se.a.Column,At=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).roleNames={},e.addUpdateModalRef=Object(r.createRef)(),e.state={users:[],roles:[],loading:!1},e.getUserList=function(){var t=Object(v.a)(g.a.mark((function t(a){var r,n,c,s,i,o,l;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.setState({loading:!0}),t.next=4,ft();case 4:if(r=t.sent,n=r.status,c=r.data,s=c.users,i=void 0===s?[]:s,o=c.roles,l=void 0===o?[]:o,0===n){t.next=13;break}return t.abrupt("return");case 13:e.initRoleNames(l),e.setState({users:i,roles:l,loading:!1}),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),y.b.error("\u7528\u6237\u5217\u8868\u83b7\u53d6\u5931\u8d25");case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e){return t.apply(this,arguments)}}(),e.initRoleNames=function(t){var a=t.reduce((function(e,t){return e[t._id]=t.name,e}),{});e.roleNames=a},e.delUser=function(t){var a=t.username,r=t._id;te.a.confirm({title:"\u786e\u5b9a\u5220\u9664".concat(a,"\u5417\uff1f"),onOk:function(){var t=Object(v.a)(g.a.mark((function t(a){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,xt({userId:r});case 2:if(n=t.sent,0===n.status){t.next=6;break}return t.abrupt("return");case 6:y.b.success("\u5220\u9664\u7528\u6237\u6210\u529f\uff01"),e.getUserList();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})},e.showAddUpdateModal=function(t){e.addUpdateModalRef.current.show(t)},e.tableHandleRender=function(t){return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(p.a,{type:"link",onClick:function(a){return e.showAddUpdateModal(t)},children:"\u4fee\u6539"}),Object(L.jsx)(p.a,{type:"link",onClick:function(a){return e.delUser(t)},children:"\u5220\u9664"})]})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getUserList()}},{key:"render",value:function(){var e=this.roleNames,t=this.tableHandleRender,a=this.addUpdateModalRef,r=this.showAddUpdateModal,n=this.getUserList,c=this.state,s=c.users,i=c.loading,o=c.roles,l=Object(L.jsx)(p.a,{type:"primary",onClick:function(e){return r()},children:"\u521b\u5efa\u7528\u6237"});return Object(L.jsxs)(oe.a,{title:l,children:[Object(L.jsxs)(Se.a,{dataSource:s,rowKey:"_id",loading:i,bordered:!0,pagination:{defaultPageSize:3,showQuickJumper:!0},children:[Object(L.jsx)(St,{title:"\u7528\u6237\u540d",dataIndex:"username"}),Object(L.jsx)(St,{title:"\u90ae\u7bb1",dataIndex:"email"}),Object(L.jsx)(St,{title:"\u7535\u8bdd",dataIndex:"phone"}),Object(L.jsx)(St,{title:"\u6ce8\u518c\u65f6\u95f4",dataIndex:"create_time",render:re}),Object(L.jsx)(St,{title:"\u6240\u5c5e\u89d2\u8272",dataIndex:"role_id",render:function(t){return e[t]}}),Object(L.jsx)(St,{title:"\u64cd\u4f5c",width:"160px",render:t})]}),Object(L.jsx)(Ct,{wrappedComponentRef:a,roles:o,getUserList:n})]})}}]),a}(r.Component),It=function(e){return R("/manage/role/list")},Rt=function(e){return R("/manage/role/add",e,"POST")},Nt=b.a.Item,Tt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).addFormRef=Object(r.createRef)(),e.addRole=function(){var t=Object(v.a)(g.a.mark((function t(a){var r,n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.addFormRef.current.validateFields();case 3:return r=t.sent,t.next=6,Rt(r);case 6:if(n=t.sent,0===n.status){t.next=10;break}return t.abrupt("return",y.b.error("\u521b\u5efa\u89d2\u8272\u5931\u8d25"));case 10:y.b.success("\u521b\u5efa\u89d2\u8272\u6210\u529f"),e.handleCancel(),e.props.getRoleList(),t.next=17;break;case 15:t.prev=15,t.t0=t.catch(0);case 17:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e){return t.apply(this,arguments)}}(),e.handleCancel=function(t){var a=e.props.controlState;e.addFormRef.current.resetFields(),a("isShowAdd",!1)},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.addRole,t=this.handleCancel,a=this.addFormRef,r=this.props.isShowAdd;return Object(L.jsx)("div",{children:Object(L.jsx)(te.a,{title:"\u521b\u5efa\u89d2\u8272",visible:r,onOk:e,onCancel:t,children:Object(L.jsx)(b.a,{ref:a,children:Object(L.jsx)(Nt,{label:"\u89d2\u8272\u540d\u79f0",name:"roleName",rules:[{required:!0,message:"\u89d2\u8272\u540d\u79f0\u5fc5\u987b\u8f93\u5165"}],children:Object(L.jsx)(m.a,{placeholder:"\u8bf7\u8f93\u5165\u89d2\u8272\u540d\u79f0",autoComplete:"off"})})})})})}}]),a}(r.Component),Mt=(a(568),a(317)),Ut=b.a.Item,Pt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={checkedKeys:[]},r.treeData=[],r.updateRole=function(){var e=Object(v.a)(g.a.mark((function e(t){var a,n,c,s,i,o,l,u,d,j,h;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.state.checkedKeys,n=r.props,c=n.role,s=n.getRoleList,i=n.controlState,o=n.user,l=n.logout,(u=Object(Be.a)({},c)).menus=a,u.auth_time=Date.now(),u.auth_name=o.username,e.next=8,R("/manage/role/update",u,"POST");case 8:if(d=e.sent,j=d.status,h=d.data,0===j){e.next=13;break}return e.abrupt("return",y.b.error("\u8bbe\u7f6e\u89d2\u8272\u6743\u9650\u5931\u8d25"));case 13:if(u._id!==o.role_id){e.next=15;break}return e.abrupt("return",l("\u5f53\u524d\u7528\u6237\u89d2\u8272\u6743\u9650\u8bbe\u7f6e\u6210\u529f\uff0c\u8bf7\u91cd\u65b0\u767b\u9646"));case 15:y.b.success("\u8bbe\u7f6e\u89d2\u8272\u6743\u9650\u6210\u529f"),i("role",h),r.handleCancel(),s();case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.handleCancel=function(e){(0,r.props.controlState)("isShowAuth",!1),r.setState({checkedKeys:[]})},r.getTreeNodes=function(e){return e.reduce((function(e,t){var a=t.title,n=t.key,c=t.children,s={title:a,key:n};return c&&(s.children=r.getTreeNodes(c)),e.push(s),e}),[])},r.treeData=[{title:"\u5e73\u53f0\u6743\u9650",key:"all",children:r.getTreeNodes(W)}],r}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.updateRole,a=this.handleCancel,r=this.treeData,n=this.props,c=n.isShowAuth,s=n.role,i=this.state.checkedKeys;return Object(L.jsxs)(te.a,{title:"\u8bbe\u7f6e\u89d2\u8272\u6743\u9650",visible:c,onOk:t,onCancel:a,children:[Object(L.jsx)(Ut,{label:"\u89d2\u8272\u540d\u79f0",children:Object(L.jsx)(m.a,{value:s.name,disabled:!0})}),Object(L.jsx)(Mt.a,{checkable:!0,defaultExpandAll:!0,checkedKeys:i,treeData:r,onCheck:function(t){return e.setState({checkedKeys:t})}})]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=e.role.menus,r=void 0===a?[]:a,n=e.isShowAuth,c=t.checkedKeys;return{checkedKeys:n?c:r}}}]),a}(r.Component),Dt=Object(i.b)((function(e){return{user:e.user}}),{logout:P})(Object(h.g)(Pt)),Lt=Se.a.Column,Ft=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={roles:[],loading:!1,role:{},isShowAdd:!1,isShowAuth:!1},e.getRoleList=function(){var t=Object(v.a)(g.a.mark((function t(a){var r,n,c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.setState({loading:!0}),t.next=4,It();case 4:if(r=t.sent,n=r.status,c=r.data,0===n){t.next=9;break}return t.abrupt("return");case 9:e.setState({roles:c,loading:!1}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),y.b.error("\u89d2\u8272\u5217\u8868\u83b7\u53d6\u5931\u8d25");case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}(),e.controlState=function(t,a){return e.setState(Object(Ce.a)({},t,a))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getRoleList()}},{key:"render",value:function(){var e=this,t=this.controlState,a=this.getRoleList,r=this.state,n=r.roles,c=r.loading,s=r.role,i=r.isShowAdd,o=r.isShowAuth,l=Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(p.a,{type:"primary",style:{marginRight:5},onClick:function(e){return t("isShowAdd",!0)},children:"\u521b\u5efa\u89d2\u8272"}),Object(L.jsx)(p.a,{type:"primary",disabled:!s._id,onClick:function(e){return t("isShowAuth",!0)},children:"\u8bbe\u7f6e\u89d2\u8272\u6743\u9650"})]});return Object(L.jsxs)(oe.a,{title:l,children:[Object(L.jsxs)(Se.a,{dataSource:n,rowKey:"_id",loading:c,bordered:!0,pagination:{defaultPageSize:3,showQuickJumper:!0},rowSelection:{type:"radio",selectedRowKeys:[s._id],onSelect:function(t){return e.setState({role:t})}},onRow:function(t){return{onClick:function(a){return e.setState({role:t})}}},children:[Object(L.jsx)(Lt,{title:"\u89d2\u8272\u540d\u79f0",dataIndex:"name"}),Object(L.jsx)(Lt,{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"create_time",render:re}),Object(L.jsx)(Lt,{title:"\u6388\u6743\u65f6\u95f4",dataIndex:"auth_time",render:re}),Object(L.jsx)(Lt,{title:"\u6388\u6743\u4eba",dataIndex:"auth_name"})]}),Object(L.jsx)(Tt,{isShowAdd:i,controlState:t,getRoleList:a}),Object(L.jsx)(Dt,{isShowAuth:o,controlState:t,getRoleList:a,role:s})]})}}]),a}(r.Component),Kt=a(122),Ht=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={sales:[5,20,36,10,10,20],stores:[6,10,25,20,15,10],load:!1},e.getOption=function(e,t){return{title:{text:"ECharts \u5165\u95e8\u793a\u4f8b"},tooltip:{},legend:{data:["\u9500\u91cf","\u5e93\u5b58"]},xAxis:{data:["\u886c\u886b","\u7f8a\u6bdb\u886b","\u96ea\u7eba\u886b","\u88e4\u5b50","\u9ad8\u8ddf\u978b","\u889c\u5b50"]},yAxis:{},series:[{name:"\u9500\u91cf",type:"bar",data:e},{name:"\u5e93\u5b58",type:"bar",data:t}]}},e.update=function(t){return e.setState((function(e){var t=e.sales,a=e.stores;return{sales:t.map((function(e){return e+1})),stores:a.map((function(e){return e-1}))}}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.setState({load:!0})}},{key:"render",value:function(){var e=this.state,t=e.sales,a=e.stores,r=e.load,n=Object(L.jsx)(p.a,{type:"primary",onClick:this.update,children:"\u66f4\u65b0"});return Object(L.jsx)(oe.a,{title:"\u67f1\u72b6\u56fe\u4e00",extra:n,children:r?Object(L.jsx)(Kt.a,{option:this.getOption(t,a)}):null})}}]),a}(r.Component),Qt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={load:!1},e.getOption=function(e){return{title:{text:"\u67d0\u7ad9\u70b9\u7528\u6237\u8bbf\u95ee\u6765\u6e90",subtext:"\u7eaf\u5c5e\u865a\u6784",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:["\u76f4\u63a5\u8bbf\u95ee","\u90ae\u4ef6\u8425\u9500","\u8054\u76df\u5e7f\u544a","\u89c6\u9891\u5e7f\u544a","\u641c\u7d22\u5f15\u64ce"]},series:[{name:"\u8bbf\u95ee\u6765\u6e90",type:"pie",radius:"55%",center:["50%","60%"],data:[{value:335,name:"\u76f4\u63a5\u8bbf\u95ee"},{value:310,name:"\u90ae\u4ef6\u8425\u9500"},{value:234,name:"\u8054\u76df\u5e7f\u544a"},{value:135,name:"\u89c6\u9891\u5e7f\u544a"},{value:1548,name:"\u641c\u7d22\u5f15\u64ce"}],itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}},e.getOption2=function(e){return{backgroundColor:"#2c343c",title:{text:"Customized Pie",left:"center",top:20,textStyle:{color:"#ccc"}},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},visualMap:{show:!1,min:80,max:600,inRange:{colorLightness:[0,1]}},series:[{name:"\u8bbf\u95ee\u6765\u6e90",type:"pie",radius:"55%",center:["50%","50%"],data:[{value:335,name:"\u76f4\u63a5\u8bbf\u95ee"},{value:310,name:"\u90ae\u4ef6\u8425\u9500"},{value:274,name:"\u8054\u76df\u5e7f\u544a"},{value:235,name:"\u89c6\u9891\u5e7f\u544a"},{value:400,name:"\u641c\u7d22\u5f15\u64ce"}].sort((function(e,t){return e.value-t.value})),roseType:"radius",label:{normal:{textStyle:{color:"rgba(255, 255, 255, 0.3)"}}},labelLine:{normal:{lineStyle:{color:"rgba(255, 255, 255, 0.3)"},smooth:.2,length:10,length2:20}},itemStyle:{normal:{color:"#c23531",shadowBlur:200,shadowColor:"rgba(0, 0, 0, 0.5)"}},animationType:"scale",animationEasing:"elasticOut",animationDelay:function(e){return 200*Math.random()}}]}},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.setState({load:!0})}},{key:"render",value:function(){var e=this.state.load;return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(oe.a,{title:"\u997c\u56fe\u4e00",children:e?Object(L.jsx)(Kt.a,{option:this.getOption(),style:{height:300}}):null}),Object(L.jsx)(oe.a,{title:"\u997c\u56fe\u4e8c",children:e?Object(L.jsx)(Kt.a,{option:this.getOption2(),style:{height:300}}):null})]})}}]),a}(r.Component),qt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={sales:[5,20,36,10,10,20],stores:[6,10,25,20,15,10],load:!1},e.getOption=function(e,t){return{title:{text:"ECharts \u5165\u95e8\u793a\u4f8b"},tooltip:{},legend:{data:["\u9500\u91cf","\u5e93\u5b58"]},xAxis:{data:["\u886c\u886b","\u7f8a\u6bdb\u886b","\u96ea\u7eba\u886b","\u88e4\u5b50","\u9ad8\u8ddf\u978b","\u889c\u5b50"]},yAxis:{},series:[{name:"\u9500\u91cf",type:"line",data:e},{name:"\u5e93\u5b58",type:"line",data:t}]}},e.update=function(t){return e.setState((function(e){var t=e.sales,a=e.stores;return{sales:t.map((function(e){return e+1})),stores:a.map((function(e){return e-1}))}}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.setState({load:!0})}},{key:"render",value:function(){var e=this.state,t=e.sales,a=e.stores,r=e.load,n=Object(L.jsx)(p.a,{type:"primary",onClick:this.update,children:"\u66f4\u65b0"});return Object(L.jsx)(oe.a,{title:"\u67f1\u72b6\u56fe\u4e00",extra:n,children:r?Object(L.jsx)(Kt.a,{option:this.getOption(t,a)}):null})}}]),a}(r.Component),Bt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(L.jsx)("h1",{children:"Order"})}}]),a}(r.Component),zt=(a(251),a(111)),Et=(a(252),a(65)),Gt=(a(575),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).goHome=function(t){var a=e.props,r=a.history;(0,a.setHeadTitle)("\u9996\u9875"),r.replace("/home")},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.setHeadTitle("")}},{key:"render",value:function(){return Object(L.jsxs)(zt.a,{className:"not-found",children:[Object(L.jsx)(Et.a,{span:12,className:"left"}),Object(L.jsxs)(Et.a,{span:12,className:"right",children:[Object(L.jsx)("h1",{children:"404"}),Object(L.jsx)("h2",{children:"\u62b1\u6b49\uff0c\u4f60\u8bbf\u95ee\u7684\u9875\u9762\u4e0d\u5b58\u5728"}),Object(L.jsx)("div",{children:Object(L.jsx)(p.a,{type:"primary",onClick:this.goHome,children:"\u56de\u5230\u9996\u9875"})})]})]})}}]),a}(r.Component)),Jt=Object(i.b)(null,{setHeadTitle:M})(Gt),Vt=H.a.Footer,Xt=H.a.Sider,Yt=H.a.Content,Zt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.user;return e&&e._id?Object(L.jsxs)(H.a,{className:"admin",children:[Object(L.jsx)(Xt,{children:Object(L.jsx)(ee,{})}),Object(L.jsxs)(H.a,{children:[Object(L.jsx)(se,{}),Object(L.jsx)(Yt,{className:"admin-content",children:Object(L.jsxs)(h.d,{children:[Object(L.jsx)(h.a,{exact:!0,from:"/",to:"/home"}),Object(L.jsx)(h.b,{path:"/home",component:ke}),Object(L.jsx)(h.b,{path:"/goods/category",component:Ge}),Object(L.jsx)(h.b,{path:"/goods/product",component:Ot}),Object(L.jsx)(h.b,{path:"/user",component:At}),Object(L.jsx)(h.b,{path:"/role",component:Ft}),Object(L.jsx)(h.b,{path:"/charts/bar",component:Ht}),Object(L.jsx)(h.b,{path:"/charts/pie",component:Qt}),Object(L.jsx)(h.b,{path:"/charts/line",component:qt}),Object(L.jsx)(h.b,{path:"/order",component:Bt}),Object(L.jsx)(h.b,{component:Jt})]})}),Object(L.jsx)(Vt,{className:"admin-footer",children:"\u63a8\u8350\u4f7f\u7528\u8c37\u6b4c\u6d4f\u89c8\u5668\uff0c\u53ef\u4ee5\u83b7\u5f97\u66f4\u4f73\u9875\u9762\u64cd\u4f5c\u4f53\u9a8c"})]})]}):Object(L.jsx)(h.a,{to:"login"})}}]),a}(r.Component),Wt=Object(i.b)((function(e){return{user:e.user}}),{})(Zt),_t=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(L.jsx)(j.a,{children:Object(L.jsxs)(h.d,{children:[Object(L.jsx)(h.b,{path:"/login",component:K}),Object(L.jsx)(h.b,{path:"/",component:Wt})]})})}}]),a}(r.Component),$t=a(138),ea=a(313),ta=a(314);var aa=JSON.parse(window.localStorage.getItem(T))||{};var ra=Object($t.combineReducers)({headTitle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return t.data;default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:aa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return t.user;case C:var a=t.errorMsg;return Object(Be.a)(Object(Be.a)({},e),{},{errorMsg:a});case S:return{};default:return e}}}),na=Object($t.createStore)(ra,Object(ea.composeWithDevTools)(Object($t.applyMiddleware)(ta.a)));s.a.render(Object(L.jsx)(i.a,{store:na,children:Object(L.jsx)(_t,{})}),document.getElementById("root"))}},[[576,1,2]]]);
//# sourceMappingURL=main.66907924.chunk.js.map